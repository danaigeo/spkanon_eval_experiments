name: StarGANv2-VC
data:
  config:
    root_folder: /ds/audio
    sample_rate: ${sample_rate}
    batch_size: ${batch_size}
    min_duration: 2
    max_duration: 20
    num_workers: 10
  datasets:
    eval:
    - spkanon_eval/data/librispeech/ls-train-other-500.txt
    train_eval:
    - spkanon_eval/data/librispeech/ls-train-clean-360.txt
seed: 100
max_speakers: 0
log_dir: spkanon_eval/logs/stargan/eval/run_all_seeds_ls-train-other-500
device: cuda
inference:
  input:
    spectrogram: spectrogram
    target: target
  run: true
resources:
  device: cpu
  n_devices: 1
  n_nodes: 1
  debug: false
target_selection:
  cls: spkanon_eval.target_selection.random.RandomSelector
  consistent_targets: true
sample_rate: 24000
batch_size: 2
featex:
  spectrogram:
    cls: spkanon_eval.featex.spectrogram.SpecExtractor
    n_mels: 80
    n_fft: 2048
    win_length: 1200
    hop_length: 300
featproc:
  star_gan:
    cls: spkanon_models.stargan.stargan.StarGAN
    init: checkpoints/stargan/Models/epoch_00150.pth
    config: checkpoints/stargan/Models/config.yml
    f0_ckpt: spkanon_eval/StarGANv2VC/Utils/JDC/bst.t7
    input:
      spectrogram: spectrogram
      n_frames: n_frames
      source: source
      target: target
    n_targets: 20
  output:
    featproc:
    - spectrogram
    - n_frames
    - target
    featex: []
synthesis:
  cls: spkanon_models.stargan.parallel_wavegan.ParallelWaveGAN
  init: checkpoints/stargan/Vocoder/checkpoint-400000steps.pkl
  sample_rate: 24000
  input:
    spectrogram: spectrogram
    n_frames: n_frames
eval:
  config:
    seed: 300
    baseline: false
    exp_folder: null
    sample_rate: ${synthesis.sample_rate}
    asv_reduce_dims: 200
    spkid:
      cls: spkanon_eval.featex.spkid.spkid.SpkId
      path: speechbrain/spkrec-xvect-voxceleb
      batch_size: 24
      num_workers: ${data.config.num_workers}
      finetune_config: spkanon_eval/config/components/spkid/train_xvec.yaml
      emb_model_ckpt: ${eval.config.spkid_emb_model_ckpt}
      train: ${eval.config.spkid_train}
    spkid_emb_model_ckpt: null
    spkid_train: false
  components:
    asv_ignorant:
      cls: spkanon_eval.evaluation.asv.spkid_plda.ASV
      scenario: ignorant
      train: false
      max_speakers: ${max_speakers}
      reduced_dims: ${eval.config.asv_reduce_dims}
      lda_ckpt: logs/stargan/train/default-360/1711973011/eval/asv-plda/ignorant/train/models/lda.pkl
      plda_ckpt: logs/stargan/train/default-360/1711973011/eval/asv-plda/ignorant/train/models/plda.pkl
      spkid: ${eval.config.spkid}
    asv_lazy_informed:
      cls: spkanon_eval.evaluation.asv.spkid_plda.ASV
      scenario: lazy-informed
      train: false
      max_speakers: ${max_speakers}
      inference: ${inference}
      sample_rate: ${synthesis.sample_rate}
      reduced_dims: ${eval.config.asv_reduce_dims}
      lda_ckpt: logs/stargan/train/default-360/1711973011/eval/asv-plda/lazy-informed/train/models/lda.pkl
      plda_ckpt: logs/stargan/train/default-360/1711973011/eval/asv-plda/lazy-informed/train/models/plda.pkl
      spkid: ${eval.config.spkid}
exp_folder: spkanon_eval/logs/stargan/eval/run_all_seeds_ls-train-other-500/1712189769
